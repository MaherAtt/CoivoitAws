<!DOCTYPE html>

    <html lang="fr">

    <head>
        <%- include('./partials/head'); -%>
    </head>

    <body>
        <% if(logged==true){ %>
                   <%- include('./partials/headerLogged'); -%>
                 <% } else{ %>
                   <%- include('./partials/header'); -%>
                <% } %>


        <!-- Formulaire de recherche d'un trajet -->
        <div class="container" id="container1" >
            <form id="myForm" class="form-horizontal"  role="form" action="./proposer" method="post">

              <div class="mx-auto" style="width: 60%;">
                  <h1 class="text-center recherche-title">Publier un Trajet</h1>

                  <div class="form-group" style="margin-bottom: 50px;">
                    <input type="search" class="form-control input-lg" id="adr-depart-input" placeholder="Départ" name="adrDepart">
                  </div>
                  <div class="form-group" style="margin-bottom: 50px;">
                    <input type="text" class="form-control input-lg" onFocus="geolocate()" id="adr-dest-input" placeholder="Destination" name="adrDestination">
                  </div>


                  <div>
                        <label class="form-check-label" for="Aller-retour">Aller-retour ?&nbsp;&nbsp;</label>
                        <input class="form-check-input" type="checkbox" name="Aller-retour" id="Aller-retour" value="Aller-retour" onclick="showRetourContainer()">
                  </div>

                  <div class="row container" >
                    <label class="form-check-label" for="Aller-retour" style="margin-top: 20px;margin-bottom: 10px;">Date de l'aller :</label>

                    <div class="row">
                        <div class="col-md" >
                            <div class="input-group date form_date" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd" >
                                <input class="form-control input-lg" type="text" value="Quand ?" name="dateDep" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                            </div>
                            <input type="hidden" id="dtp_input2" value="" /><br/>
                        </div>
                        <div class="col-md">
                            <div class="input-group date form_time" data-date="" data-date-format="hh:ii" data-link-field="dtp_input3" data-link-format="hh:ii">
                                <input class="form-control input-lg" type="text" value="À quelle heure ?" name="heureDep" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                            </div>
                            <input type="hidden" id="dtp_input3" value="" /><br/>
                        </div>
                    </div>
                  </div>

                  <div id="date-retour-container" class="row container" style="display: none;" >
                    <label class="form-check-label" for="Aller-retour" style="margin-top: 10px;margin-bottom: 10px;">Date du retour :</label>
                    <div class="row">
                        <div class="col-md" >
                            <div class="input-group date form_date" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd" >
                                <input class="form-control input-lg" type="text" value="Quand ?" name="dateDep2" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                            </div>
                            <input type="hidden" id="dtp_input2" value="" /><br/>
                        </div>
                        <div class="col-md">
                            <div class="input-group date form_time" data-date="" data-date-format="hh:ii" data-link-field="dtp_input3" data-link-format="hh:ii">
                                <input class="form-control input-lg" type="text" value="À quelle heure ?" name="heureDep2" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                            </div>
                            <input type="hidden" id="dtp_input3" value="" /><br/>
                        </div>
                    </div>
                  </div>

                  <div class="form-group row" style="margin-top: 20px;">
                    <label for="input-prix" class="col-1 col-form-label">Prix</label>
                    <div class="col-3">
                        <input class="form-control" type="number" value="10" id="input-prix" name="prix">
                    </div>
                  </div>

                  <div class="form-group ">
                    <label for="commentaire-trajet" style="margin-top: 10px; margin-bottom: 10px;">Ajoutez des détails !</label>
                    <textarea class="form-control" id="commentaire-trajet" rows="3" name="commentaire"></textarea>
                  </div>

                  <div class="text-center" style="margin-top: 30px; margin-bottom: 50px;">
                    <button type="submit" class="btn btn-primary btn-lg" style="padding-left: 30px; padding-right: 30px;" >Publier</button>
                  </div>


              </div>

            </form>
        </div>



<!-- Affichage du calendrier de la date et l'heure-->
<script type="text/javascript" src="javascripts//bootstrap-datetimepicker.js" charset="UTF-8"></script>

<!-- Auocomplete Address-->
<script src="https://cdn.jsdelivr.net/npm/places.js@1.18.1/dist/cdn/placesInstantsearchWidget.min.js"></script>


<script type="text/javascript">


            // Format de la date et du timePicker
            ;(function($){
                $.fn.datetimepicker.dates['fr'] = {
                    days: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi", "Dimanche"],
                    daysShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam", "Dim"],
                    daysMin: ["D", "L", "Ma", "Me", "J", "V", "S", "D"],
                    months: ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin", "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"],
                    monthsShort: ["Jan", "Fev", "Mar", "Avr", "Mai", "Jui", "Jul", "Aou", "Sep", "Oct", "Nov", "Dec"],
                    today: "Aujourd'hui",
                    suffix: [],
                    meridiem: ["am", "pm"],
                    weekStart: 1,
                    format: "dd/mm/yyyy hh:ii"
                };
            }(jQuery));
            $('.form_date').datetimepicker({
                language:  'fr',
                weekStart: 1,
                todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 2,
                minView: 2,
                forceParse: 0
            });
            $('.form_time').datetimepicker({
                language:  'fr',
                weekStart: 1,
                //todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 1,
                minView: 0,
                maxView: 1,
                forceParse: 0
            });

             //Autocomplete pour addresse
            (function() {
                var searchBox = placesInstantsearchWidget({
                  appId: 'plKD0BHKH6A7',
                  apiKey: 'd73e81b8f89e712327f4c6daa086e67c',
                  container: document.querySelector('#adr-depart-input')
                });
                var searchBox2 = placesInstantsearchWidget({
                  appId: 'plKD0BHKH6A7',
                  apiKey: 'd73e81b8f89e712327f4c6daa086e67c',
                  container: document.querySelector('#adr-dest-input')
                });

                search.addWidget(searchBox);
                search.addWidget(searchBox2);

                search.start();
            })();


            //Publier un Trajet si l'utilisateur est connecté
            function publierTrajet(){

                //Vérification si l'utilisateur n'est pas connecté, il sera rediriger vers login
                if (true) {
                    window.alert("Vous devez vous connecter");
                }

                //les requetes sql
            }


            function showRetourContainer(){

                if (document.getElementById("date-retour-container").style.display == "none") {
                    document.getElementById("date-retour-container").style.display = "block";
                }
                else{
                    document.getElementById("date-retour-container").style.display = "none";
                }
            }

        </script>

        <%- include('./partials/menu'); -%>
        <%- include('./partials/footer'); -%>



    </body>
    </html>